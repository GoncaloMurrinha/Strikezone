<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>StrikeZone — Criar Conta</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
      :root {
        color-scheme: dark;
        --bg:#0b0d26;
        --panel:#171a40;
        --accent:#f64b9b;
        --accent-soft:#9f7eff;
        --text:#f2f4ff;
        --muted:rgba(242,244,255,0.7);
      }
      * { box-sizing:border-box; }
      body {
        margin:0;
        min-height:100vh;
        background:radial-gradient(circle at top,#1e2564 0%,#060714 60%);
        font-family:'Space Grotesk',system-ui,sans-serif;
        color:var(--text);
        display:flex;
        justify-content:center;
        align-items:center;
        padding:2rem;
      }
      .register-card {
        width:min(860px,100%);
        background:rgba(15,18,48,0.9);
        border:1px solid rgba(255,255,255,0.08);
        border-radius:24px;
        box-shadow:0 40px 80px rgba(4,6,26,0.6);
        padding:2.5rem;
        display:grid;
        grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
        gap:2rem;
      }
      .register-card img.logo {
        width:110px;
        display:block;
        margin-bottom:1rem;
      }
      h1 { margin:0; font-size:2rem; }
      p { color:var(--muted); line-height:1.6; }
      form {
        display:flex;
        flex-direction:column;
        gap:1rem;
      }
      label { font-weight:500; display:block; margin-bottom:0.35rem; }
      input {
        width:100%;
        border-radius:14px;
        border:1px solid rgba(255,255,255,0.12);
        background:rgba(8,10,30,0.9);
        padding:0.85rem 1rem;
        color:var(--text);
        font-size:1rem;
        outline:none;
      }
      input:focus {
        border-color:var(--accent-soft);
        box-shadow:0 0 0 3px rgba(159,126,255,0.2);
      }
      .btn {
        display:inline-flex;
        align-items:center;
        justify-content:center;
        padding:0.95rem 1rem;
        border-radius:999px;
        border:none;
        background:linear-gradient(135deg,var(--accent),var(--accent-soft));
        color:#fff;
        font-weight:600;
        cursor:pointer;
        box-shadow:0 18px 45px rgba(246,75,155,0.3);
      }
      .msg { margin-top:1rem; font-weight:500; }
      @media (max-width:640px) {
        .register-card { padding:1.75rem; }
      }
    </style>
  </head>
  <body>
    <div class="register-card">
      <div>
        <img src="/assets/logo_strikezone.png" class="logo" alt="StrikeZone">
        <h1>Criar Conta de Campo</h1>
        <p>Ativa o painel para gerir arenas, equipas e eventos em tempo real. Depois de criares a conta, usa o login de dono para montar os matches.</p>
        <p class="muted">Já tens conta? <a href="/owner/login">Entrar aqui</a></p>
      </div>
      <form id="registerForm">
        <div>
          <label for="name">Nome do Responsável</label>
          <input id="name" type="text" placeholder="Ex: Gonçalo M." required>
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="responsavel@strikezone.pt" required>
        </div>
        <div>
          <label for="password">Palavra-passe</label>
          <input id="password" type="password" placeholder="••••••••" required>
        </div>
        <div>
          <label for="field_name">Nome do Campo</label>
          <input id="field_name" type="text" placeholder="StrikeZone Coimbra" required>
        </div>
        <div>
          <label for="field_location">Localização</label>
          <input id="field_location" type="text" placeholder="Coimbra, Portugal" required>
        </div>
        <button type="submit" class="btn">Criar Conta</button>
        <div id="message" class="msg"></div>
      </form>
    </div>

    <script>
      const form = document.getElementById("registerForm");
      const msg = document.getElementById("message");
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        msg.textContent = "A processar…";
        msg.style.color = "var(--muted)";
        try {
          const payload = {
            name: document.getElementById("name").value.trim(),
            email: document.getElementById("email").value.trim(),
            password: document.getElementById("password").value.trim(),
            field_name: document.getElementById("field_name").value.trim(),
            field_location: document.getElementById("field_location").value.trim()
          };
          const res = await fetch("/api/register.php", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if (res.ok && data.status === "success") {
            msg.textContent = "Conta criada com sucesso! Já podes iniciar sessão.";
            msg.style.color = "#7dfdac";
            form.reset();
          } else {
            msg.textContent = data.message || "Ocorreu um erro ao criar conta.";
            msg.style.color = "#ff8ea5";
          }
        } catch (error) {
          msg.textContent = "Erro de ligação ao servidor.";
          msg.style.color = "#ff8ea5";
        }
      });
    </script>
  </body>
</html>
